$(document).ready(function(){function e(e){var s=new google.maps.Marker({position:e,maxWidth:200,maxHeight:200}),r={center:e,zoom:18,mapTypeId:google.maps.MapTypeId.ROADMAP},t=$(".street-address").text(),a=$("h1").text(),l=$(".locality-locality").text(),n=$(".locality-region").text(),i=$(".locality-postal-code").text(),c="<p><strong>"+a+"</strong><p/><p>"+t+", "+l+", "+n+", "+i+"</p>",m=new google.maps.InfoWindow({content:c});google.maps.event.addListener(s,"click",function(){m.open(o,s)}),o=new google.maps.Map(document.getElementById("map-canvas"),r),s.setMap(o)}$(".carousel").carousel({interval:!1,keyboard:!1}),WebFontConfig={google:{families:["Roboto: 100,300,400,700,900","Roboto Slab: 100,300,400,700"]},timeout:2e3,active:function(){$("html").trigger("wfactive")}},function(){var e=document.createElement("script");e.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1.5.6/webfont.js",e.type="text/javascript",e.async="true";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(e,s)}(),$(window).scroll(function(){$(this).scrollTop()>100?$("#top-link-block").fadeIn():$("#top-link-block").fadeOut()}),$(".to-top").on("click",function(){return $("html,body").animate({scrollTop:0},"slow","easeOutExpo"),!1});var s=!1;$(window).scroll(function(){if($(window).scrollTop()==$(document).height()-$(window).height()&&!s){var e=$("#others-reviews .media").length;s=!0,$.ajax({type:"post",url:"/review/batch",dataType:"html",cache:!1,data:{itemCount:parseInt(e,10)}}).done(function(e){try{var o=$(".spinner-wrapper");e&&(o.fadeIn(1e3,function(){$(".spinner-wrapper").before(e),$("input.rating").rating("refresh")}),o.fadeOut("fast",function(){s=!1}))}catch(r){console.log(r)}})}}),$("body").on("click","a.smooth-scroll",function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash);if(e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length)return $("html,body").animate({scrollTop:e.offset().top-90},"slow","easeOutExpo"),!1}}),$("#top-menu a").click(function(){$("#top-menu a").removeClass("active"),$(this).addClass("active")}),$("#others-reviews").on("click",".collapse-btn",function(e){e.preventDefault();var s=$(this),o=s.closest("p").find(".collapse-body");o.toggle(),s.toggle()}),$(".btn-confirm").confirmation(),$("#form-login").validate({rules:{login_username:{minlength:3,maxlength:20,required:!0},login_psw:{minlength:6,maxlength:72,required:!0}},errorElement:"small",errorClass:"text-danger",highlight:function(e,s,o){$(e).closest(".form-group").find("small").removeClass(o).addClass(s),$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e,s,o){$(e).closest(".form-group").find("small").removeClass(s).addClass(o),$(e).closest(".form-group").removeClass("has-error").addClass("has-success")}}),$("#login-btn").on("click",function(){var e=$("#login-name").val();$("#form-login").valid()&&!e&&$("#form-login").submit()}),jQuery.validator.addMethod("sum",function(e,s,o){return this.optional(s)||parseInt(e,10)==o[0]+o[1]},jQuery.validator.format("Please enter the correct value: {0} + {1}.")),$("#form-register").validate({rules:{register_username:{minlength:3,maxlength:20,required:!0,remote:{url:"/user/check-username",type:"post"}},register_psw:{minlength:6,maxlength:72,required:!0},register_psw2:{minlength:6,maxlength:72,required:!0,equalTo:"#register-psw"},register_email:{email:!0,required:!0,remote:{url:"/user/check-email",type:"post"}},register_captcha:{required:!0,sum:function(e){var s=$(e).closest(".form-group").find("label").text(),o=s.split(" ");return[parseInt(o[0],10),parseInt(o[2],10)]}}},errorElement:"small",errorClass:"text-danger",highlight:function(e,s,o){$(e).closest(".form-group").find("small").removeClass(o).addClass(s),$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e,s,o){$(e).closest(".form-group").find("small").removeClass(s).addClass(o).hide(),$(e).closest(".form-group").removeClass("has-error").addClass("has-success")}}),$("#register-btn").on("click",function(){var e=$("#register-name").val();$("#form-register").valid()&&!e&&$("#form-register").submit()}),$("#form-change-psw").validate({rules:{change_psw_current_psw:{minlength:6,maxlength:72,required:!0},change_psw_psw:{minlength:6,maxlength:72,required:!0},change_psw_psw2:{minlength:6,maxlength:72,required:!0,equalTo:"#change-psw-psw"}},errorElement:"small",errorClass:"text-danger",highlight:function(e,s,o){$(e).closest(".form-group").find("small").removeClass(o).addClass(s),$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e,s,o){$(e).closest(".form-group").find("small").removeClass(s).addClass(o).hide(),$(e).closest(".form-group").removeClass("has-error").addClass("has-success")}}),$("#change-psw-btn").on("click",function(){var e=$("#change-psw-name").val();$("#form-change-psw").valid()&&!e&&$("#form-change-psw").submit()}),$("#form-forgot").validate({rules:{forgot_email:{email:!0,required:!0}},errorElement:"small",errorClass:"text-danger",highlight:function(e,s,o){$(e).closest(".form-group").find("small").removeClass(o).addClass(s),$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e,s,o){$(e).closest(".form-group").find("small").removeClass(s).addClass(o),$(e).closest(".form-group").removeClass("has-error").addClass("has-success")}}),$("#forgot-btn").on("click",function(){var e=$("#forgot-name").val();if($("#form-forgot").valid()&&!e){var s='<span class="spinner-icon"></span>',o=$("#form-forgot");o.fadeOut(600,"easeOutExpo",function(){$("#forgot").append(s);var e="/user/forgot",o={email:$("#forgot-email").val()},r=$.post(e,o);r.done(function(e){var s=e;$(".spinner-icon").fadeOut(600,"easeOutExpo",function(){var e="success"==s.status?"text-success":"text-danger",o='<small class="forgot-msg '+e+'">'+s.msg+"</small>";$(".forgot-msg").remove(),$("#form-forgot").append(o),$("#forgot-email").val(""),$("#form-forgot").fadeIn(600,"easeOutExpo")})})})}}),jQuery.validator.addMethod("integer",function(e){return 0!=e&&e==parseInt(e,10)},jQuery.validator.format("Please enter a non-zero integer.")),$("#form-review").validate({rules:{review_review_body:{minlength:5,maxlength:21843,required:!0},review_review_rating:{digits:!0,range:[1,5],integer:!0,required:!0}},errorElement:"small",errorClass:"text-danger",highlight:function(e,s,o){$(e).closest(".form-group").find("small").removeClass(o).addClass(s),$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e,s,o){$(e).closest(".form-group").find("small").removeClass(s).addClass(o),$(e).closest(".form-group").removeClass("has-error").addClass("has-success")}}),$("#review-btn").on("click",function(){var e=$("#review-name").val();$("#form-review").valid()&&!e&&$("#form-review").submit()});{var o;$(this)}$("#shop-modal").on("shown.bs.modal",function(s){$(s.relatedTarget);e(new google.maps.LatLng(43.7731522,11.254480400000034)),google.maps.event.trigger(o,"resize")})});